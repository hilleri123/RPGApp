\section{Планы: Next}\label{roadmap:next}

\paragraph{Принцип}
Это список ближайших задач без привязки к датам; порядок внутри разделов отражает желаемый приоритет и зависимость. 

\subsection{Сессия (runtime)}\label{roadmap:next:session}

\subsubsection{Карта и игровое поле}\label{roadmap:next:session:map}

\begin{itemize}
\item Пометки на карте, видимые игрокам в рантайме (мастер оставляет маркеры/подписи/указатели на карте, игроки видят их в сцене).
\item Значки игроков внутри полигонов (на карте внутри области показывать, какие персонажи/игроки сейчас ``находятся'' в этой зоне).
\item Сетка на карту (для тактического обсуждения предметов/координат и привязки к клеткам).
\item Игровое поле сцены (отдельный режим/панель): быстрые полигоны/области, перемещение объектов по полю; редактирование доступно мастеру (ограничения могут зависеть от правил и модели перемещения).
\item Клик по полигону $\rightarrow$ перейти в соответствующую локацию (если полигон связан с локацией; проверить реализуемость и UX).
\end{itemize}

\subsubsection{Локации, сцены, story beat}\label{roadmap:next:session:narrative-flow}

\begin{itemize}
\item Исправить поведение дерева локаций (текущий баг).
\item Довести работу story beat в сессии: поиск, быстрый переход, удобное переключение.
\end{itemize}

\subsubsection{Правила в сессии (data + виджеты)}\label{roadmap:next:session:rules}

\begin{itemize}
\item Инициатива (механика порядка ходов/очерёдности).
\item Добавить данные правил в сессию (глобально): чтобы правила могли хранить состояние, влияющее на доступные действия и UI.
\item Добавить данные правил в сцену + виджеты: поддержка режимов/фаз (например, фаза боя, фаза отдыха и т.п.), и привязка доступных действий к фазе.
\item Виджеты от правил: расширяемые панели/индикаторы/кнопки в интерфейсе сессии, предоставляемые плагином правил.
\item Полный интерфейс для правил (редактор/управление правилами и связанными данными).
\end{itemize}

\subsubsection{Удобство и стабильность}\label{roadmap:next:session:ux}

\begin{itemize}
\item Мини-форма для пати сессии: быстрые заметки мастера/группы во время игры.
\item Починить \texttt{close action} (текущее некорректное поведение закрытия/завершения действия).
\item Перемещение предметов (в рантайме): перенос предметов между локациями/контейнерами/персонажами (точная модель уточняется).
\item Предметы в правилах (в интерфейс): связать ``предметы'' с системой правил и их UI-представлением.
\end{itemize}

\subsection{Сценарии (подготовка и экспорт)}\label{roadmap:next:scenarios}

\begin{itemize}
\item Экспорт сценария в PDF (нарративная часть).
\item Экспорт/дамп объектов правил в PDF (состояние/настройки \texttt{data} от плагина правил в человекочитаемом виде).
\end{itemize}
